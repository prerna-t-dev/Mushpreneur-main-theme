{% comment %}
  Day Shrooms Short Landing Page - Email Capture Box
  Two-panel: form (left/top) + lifestyle image (right/bottom)
{% endcomment %}

<style>
  .ds-slp-email-capture {
    background: {{ section.settings.background_color | default: '#FDF1E9' }};
  }

  .ds-slp-email-capture--wrapper{
    border-radius: 20px;
    overflow: hidden;
  }
  
  .ds-slp-email-capture__card {
    background: #FFFFFF;
    display: flex;
    flex-direction: column;
    justify-content: center;
    height: 100%;
    /* border-radius: 16px; */
    padding: 40px 20px;
  }
  
  @media (min-width: 1024px) {
    .ds-slp-email-capture__card {
      padding: 80px 64px;
    }
  }

  @media (min-width: 1800px) {
    .ds-slp-email-capture--wrapper {
      max-width: 85%;
    }
  }
  
  .ds-slp-email-capture__headline {
    color: {{ section.settings.headline_color | default: '#000000' }};
    font-weight: 700;
    line-height: 1.2;
  }
  
  .ds-slp-email-capture__sign-up-label {
    color: {{ section.settings.text_color | default: '#000000' }};
  }

  .ds-slp-email-capture__benefit--wrapper{
    padding: 28px 32px;
    background: #FDF1E9;
    border: 1px solid #00000040;
    border-radius: 16px;
  }
  
  .ds-slp-email-capture__benefit-item {
    display: flex;
    align-items: flex-start;
    gap: 10px;
  }
  
  .ds-slp-email-capture__checkmark {
    flex-shrink: 0;
    width: 24px;
    height: 24px;
  }
  
  .ds-slp-email-capture__benefit-text {
    color: {{ section.settings.text_color | default: '#000000' }};
  }
  
  .ds-slp-email-capture__form-row {
    display: flex;
    flex-direction: column;
    gap: 16px;
  }
  
  @media (min-width: 576px) {
    .ds-slp-email-capture__form-row {
      flex-direction: row;
      align-items: stretch;
      gap: 16px;
    }
  }
  
  .ds-slp-email-capture__input {
    width: 100%;
    padding: 8px 24px;
    border: 1px solid {{ section.settings.input_border_color | default: '#E45825' }};
    border-radius: 100px;
    font-size: 18px;
    letter-spacing: -0.9px;
    background: #FFFFFF;
    appearance: none;
    outline: none;
    height: 45px;
  }
  
  .ds-slp-email-capture__input::placeholder {
    color: #EF7822;
    opacity: 0.5;
  }
  
 
  
  .ds-slp-email-capture__btn {
    background: linear-gradient(90deg, #F14D55 0%, #EF7822 81.6%);
    height: 45px;
    color: #FFFFFF;
    font-weight: 600;
    padding: 8px 20px;
    border: none;
    border-radius: 100px;
    cursor: pointer;
    font-size: 18px;
    letter-spacing: -0.9px;
    white-space: nowrap;
  }

  @media (min-width: 576px) {
    .ds-slp-email-capture__input,
    .ds-slp-email-capture__btn {
      padding: 12px 24px;
      height: 56px;
    }
  }
  
  
  
  .ds-slp-email-capture__tagline {
    color: {{ section.settings.tagline_color | default: '#6B7280' }};
    font-size: 14px;
    letter-spacing: -0.7px;
  }
  
  .ds-slp-email-capture__response-message {
    font-size: 14px;
    letter-spacing: -0.7px;
    margin-top: 16px;
    font-weight: 600;
  }
  
  .cf-turnstile {
    margin: 20px auto 2px;
  }
  
  .ds-slp-email-capture__image {
    width: 100%;
    height: auto;
    object-fit: cover;
    display: block;
  }
  
  @media (min-width: 1024px) {
    .ds-slp-email-capture__image {
      height: 100%;
      object-fit: cover;
    }
  }
</style>

<section class="ds-slp-email-capture" id="ds-slp--email-capture-box">
  <div class="mx-auto px-5 sm:px-6 lg:px-16 py-10 pb-16 lg:py-16 lg:pb-24">
    <div class="ds-slp-email-capture--wrapper grid grid-cols-1 lg:grid-cols-2 gap-0 items-stretch max-w-6xl_ mx-auto">
      {% comment %} Left / Top - Form Card {% endcomment %}
      <div class="ds-slp-email-capture__card order-1">
        {% if section.settings.headline != blank %}
          <h2 class="ds-slp-email-capture__headline font-bold text-[36px] lg:text-[48px] leading-[1.2] tracking-[-1.8px] lg:tracking-[-2.4px] mb-6 pr-[20%]">
            {{ section.settings.headline }}
          </h2>
        {% endif %}
        
        {% if section.settings.sign_up_label != blank %}
          <p class="ds-slp-email-capture__sign-up-label font-bold text-lg lg:text-2xl leading-[1.2] tracking-[-0.9px] lg:tracking-[-1px] mb-6">
            {{ section.settings.sign_up_label }}
          </p>
        {% endif %}
        
        {% if section.blocks.size > 0 %}
          <ul class="ds-slp-email-capture__benefit--wrapper space-y-4 mb-8">
            {% for block in section.blocks %}
              {% case block.type %}
                {% when 'benefit' %}
                  <li class="ds-slp-email-capture__benefit-item" {{ block.shopify_attributes }}>
                    <svg class="ds-slp-email-capture__checkmark" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                      <circle cx="12" cy="12" r="12" fill="{{ section.settings.checkmark_color | default: '#FF3EAD' }}"/>
                      <path d="M7.5 12.5L10.5 15.5L16.5 9.5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span class="ds-slp-email-capture__benefit-text text-base tracking-[-0.8px] leading-[1.5]">{{ block.settings.text }}</span>
                  </li>
              {% endcase %}
            {% endfor %}
          </ul>
        {% endif %}
        
        {% render 'email-validation-form',
          form_id: 'ds-slp-email-capture-form-' | append: section.id,
          email_input_id: 'ds-slp-email-' | append: section.id,
          response_message_id: 'ds-slp-email-capture-response-' | append: section.id,
          form_classes: 'ds-slp-email-capture__form',
          form_row_classes: 'ds-slp-email-capture__form-row',
          email_input_classes: 'ds-slp-email-capture__input',
          button_classes: 'ds-slp-email-capture__btn',
          email_placeholder: section.settings.email_placeholder | default: 'Your email address',
          button_text: section.settings.button_text | default: 'Join the List',
          success_message: section.settings.success_message | default: 'Thank you for joining the Day Shrooms Launch List! Your first email is on its way to your inbox.',
          response_message_classes: 'ds-slp-email-capture__response-message'
        %}
        
        {% if section.settings.tagline != blank %}
          <p class="ds-slp-email-capture__tagline mt-4">
            {{ section.settings.tagline }}
          </p>
        {% endif %}
      </div>
      
      {% comment %} Right / Bottom - Lifestyle Image {% endcomment %}
      <div class="order-2 h-full">
        {% if section.settings.lifestyle_image != blank %}
          <img
            src="{{ section.settings.lifestyle_image | image_url: width: 800 }}"
            alt="{{ section.settings.lifestyle_image.alt | default: 'Day Shrooms' | escape }}"
            class="ds-slp-email-capture__image"
            width="800"
            height="600"
            loading="lazy"
          >
        {% else %}
          <div class="ds-slp-email-capture__image-placeholder bg-gray-200 rounded-2xl aspect-[4/3] flex items-center justify-center">
            <span class="text-gray-400 text-sm">Lifestyle Image</span>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "DS SLP Email Capture",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "headline",
      "label": "Headline",
      "default": "Still wondering if it's for you?"
    },
    {
      "type": "text",
      "id": "sign_up_label",
      "label": "Sign up label",
      "default": "Sign up and receive:"
    },
    {
      "type": "text",
      "id": "email_placeholder",
      "label": "Email placeholder",
      "default": "Your email address"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "Join the List"
    },
    {
      "type": "text",
      "id": "tagline",
      "label": "Tagline",
      "default": "Skip the crash. Score the upgrade. Start your flow."
    },
    {
      "type": "textarea",
      "id": "success_message",
      "label": "Success Message",
      "default": "Thank you for joining the Day Shrooms Launch List! Your first email is on its way to your inbox."
    },
    {
      "type": "image_picker",
      "id": "lifestyle_image",
      "label": "Lifestyle image"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Section background",
      "default": "#FDF1E9"
    },
    {
      "type": "color",
      "id": "headline_color",
      "label": "Headline color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "checkmark_color",
      "label": "Checkmark color",
      "default": "#FF3EAD"
    },
    {
      "type": "color",
      "id": "input_border_color",
      "label": "Input border color",
      "default": "#E45825"
    },
    {
      "type": "color",
      "id": "tagline_color",
      "label": "Tagline color",
      "default": "#6B7280"
    }
  ],
  "blocks": [
    {
      "type": "benefit",
      "name": "Benefit",
      "settings": [
        {
          "type": "text",
          "id": "text",
          "label": "Benefit text",
          "default": "A deep dive into why mushrooms > coffee"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "DS SLP Email Capture",
      "blocks": [
        {
          "type": "benefit",
          "settings": {
            "text": "A deep dive into why mushrooms > coffee"
          }
        },
        {
          "type": "benefit",
          "settings": {
            "text": "First dibs on our subscriber-only launch"
          }
        },
        {
          "type": "benefit",
          "settings": {
            "text": "Launch-only Buy 2, Get 1 Free offer"
          }
        }
      ]
    }
  ]
}
{% endschema %}
