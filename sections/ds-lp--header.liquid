{% comment %}
  Day Shrooms Landing Page Header Section
  
  This section renders the header for the Day Shrooms landing page with
  smooth scroll navigation to different sections.
{% endcomment %}

<style>
  #shopify-section-{{ section.id }} {
    position: -webkit-sticky;
    position: sticky;
    top: 0;
    z-index: 100;
  }
  
  .ds-lp-header {
    position: relative;
    background-color: {{ section.settings.background_color }};
    transition: box-shadow 0.3s ease;
    border-color: #00000040;
    width: 100%;
  }
  
  .ds-lp-header.scrolled {
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  }
  
  .ds-lp-header__nav-link {
    position: relative;
    transition: color 0.3s ease;
    color: {{ section.settings.text_color }};
  }
  
  .ds-lp-header__nav-link:hover {
    color: {{ section.settings.text_color | color_modify: 'alpha', 0.7 }};
  }
  
  .ds-lp-header__nav-link::after {
    content: '';
    position: absolute;
    bottom: -4px;
    left: 0;
    width: 0;
    height: 2px;
    background-color: currentColor;
    transition: width 0.3s ease;
  }
  
  .ds-lp-header__nav-link:hover::after {
    width: 100%;
  }
  
  .ds-lp-header__cta-button {
    transition: all 0.3s ease;
    background-color: {{ section.settings.button_color }};
    color: {{ section.settings.button_text_color }};
  }
  
  .ds-lp-header__cta-button:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    background-color: {{ section.settings.button_color | color_darken: 10 }};
  }
  
  .ds-lp-header__brand {
    color: {{ section.settings.text_color }};
    display: inline-block;
  }
  
  .ds-lp-header__brand img {
    display: block;
    max-width: 100%;
    height: auto;
  }
  
  @media (max-width: 1023px) {
    .ds-lp-header__nav {
      display: none;
    }
  }
  
  @media (min-width: 1280px) {
    .ds-lp-header__nav-cta-wrapper {
      gap: 2rem;
    }
    
    .ds-lp-header__nav {
      gap: 2rem;
    }
  }
  
  
  .ds-lp-header__border {
    border-color: {{ section.settings.border_color }};
  }
</style>

<header class="ds-lp-header" id="ds-lp-header">
  <div class="w-full border-b">
    <div class="mx-auto py-4 px-5 sm:px-6 lg:px-16">
      <div class="flex items-center justify-between">
        {% comment %} Brand Logo/Name - Left {% endcomment %}
        <div class="flex-shrink-0">
          {% if section.settings.brand_image != blank %}
            {%- liquid
              assign image_src = section.settings.brand_image | image_url
              
              if section.settings.brand_image.width and section.settings.brand_image.height
                assign img_width = section.settings.brand_image.width
                assign img_height = section.settings.brand_image.height
              else
                assign img_width = section.settings.brand_image_desktop_width
                assign img_height = section.settings.brand_image_desktop_width | divided_by: 2
              endif
            -%}
            <div class="ds-lp-header__brand">
              <img 
                src="{{ image_src }}"
                width="{{ img_width }}"
                height="{{ img_height }}"
                alt="{{ section.settings.brand_image.alt | default: section.settings.brand_name | default: 'Brand Logo' }}"
                style="width: {{ section.settings.brand_image_mobile_width }}px; max-width: 100%; height: auto;"
                class="ds-lp-header__brand-img"
                loading="eager"
              >
            </div>
            <style>
              @media (min-width: 1024px) {
                .ds-lp-header__brand-img {
                  width: {{ section.settings.brand_image_desktop_width }}px !important;
                }
              }
            </style>
          {% else %}
            <div class="ds-lp-header__brand text-2xl lg:text-3xl font-bold tracking-tight">
              {{ section.settings.brand_name | default: 'Mushpreneur' }}
            </div>
          {% endif %}
        </div>
        
        {% comment %} Navigation and CTA - Right {% endcomment %}
        <div class="ds-lp-header__nav-cta-wrapper flex items-center gap-4 xl:gap-8">
          {% comment %} Navigation Links - Center (Desktop) {% endcomment %}
          <nav class="ds-lp-header__nav hidden lg:flex items-center gap-4 xl:gap-8">
            <a href="#ds-lp--why-it-works" class="ds-lp-header__nav-link text-sm lg:text-base font-regular tracking-[-0.8px]">
              {{ section.settings.nav_link_1 | default: 'Why it Works' }}
            </a>
            <a href="#ds-lp--how-it-works" class="ds-lp-header__nav-link text-sm lg:text-base font-regular tracking-[-0.8px]">
              {{ section.settings.nav_link_2 | default: 'How it Works' }}
            </a>
            <a href="#ds-lp--comparison" class="ds-lp-header__nav-link text-sm lg:text-base font-regular tracking-[-0.8px]">
              {{ section.settings.nav_link_3 | default: 'Comparison' }}
            </a>
            <a href="#ds-lp--founders-message" class="ds-lp-header__nav-link text-sm lg:text-base font-regular tracking-[-0.8px]">
              {{ section.settings.nav_link_4 | default: "Founder's Message" }}
            </a>
            <a href="#ds-lp--testimonials" class="ds-lp-header__nav-link text-sm lg:text-base font-regular tracking-[-0.8px]">
              {{ section.settings.nav_link_5 | default: 'Testimonials' }}
            </a>
            <a href="#ds-lp--faq" class="ds-lp-header__nav-link text-sm lg:text-base font-regular tracking-[-0.8px]">
              {{ section.settings.nav_link_6 | default: 'FAQ' }}
            </a>
          </nav>
          
         
          
          <a 
            href="#ds-lp--buy-box" 
            class="ds-lp-scroll-to text-base font-bold bg-black text-white px-5 py-2 leading-[1.5] tracking-[-0.8px] rounded-full mx-auto block scroll-trigger animate--slide-in"
            data-scroll-target="#ds-lp--buy-box"
          >
            {{ section.settings.cta_text | default: 'Join the List' }}
          </a>
        </div>
      </div>
    </div>
  </div>
</header>

<script>
  // Smooth scroll function for anchor links
  function smoothScroll(event) {
    event.preventDefault();
    const targetId = event.currentTarget.getAttribute('href');
    if (targetId && targetId.startsWith('#')) {
      const targetElement = document.querySelector(targetId);
      if (targetElement) {
        const headerHeight = document.getElementById('ds-lp-header')?.offsetHeight || 0;
        const targetPosition = targetElement.offsetTop - headerHeight;
        
        window.scrollTo({
          top: targetPosition,
          behavior: 'smooth'
        });
      }
    }
  }
  
  // Add smooth scroll to all navigation links
  document.addEventListener('DOMContentLoaded', function() {
    const navLinks = document.querySelectorAll('.ds-lp-header__nav-link, .ds-lp-header__cta-button');
    navLinks.forEach(link => {
      link.addEventListener('click', smoothScroll);
    });
    
    // Add scroll effect to header
    const header = document.getElementById('ds-lp-header');
    let lastScroll = 0;
    
    window.addEventListener('scroll', function() {
      const currentScroll = window.pageYOffset;
      
      if (currentScroll > 10) {
        header.classList.add('scrolled');
      } else {
        header.classList.remove('scrolled');
      }
      
      lastScroll = currentScroll;
    });
    
    // Reusable smooth scroll function for CTAs with class 'ds-lp-scroll-to'
    // This can be used on any element with class 'ds-lp-scroll-to' and data-scroll-target attribute
    const scrollTriggers = document.querySelectorAll('.ds-lp-scroll-to');
    
    scrollTriggers.forEach(function(trigger) {
      trigger.addEventListener('click', function(event) {
        event.preventDefault();
        
        const targetSelector = trigger.getAttribute('data-scroll-target') || trigger.getAttribute('href');
        
        if (targetSelector && targetSelector.startsWith('#')) {
          const targetElement = document.querySelector(targetSelector);
          
          if (targetElement) {
            // Get header height for offset
            const header = document.getElementById('ds-lp-header');
            const headerHeight = header ? header.offsetHeight : 0;
            const targetPosition = targetElement.offsetTop - headerHeight;
            
            window.scrollTo({
              top: targetPosition,
              behavior: 'smooth'
            });
          }
        }
      });
    });
  });
</script>

{% schema %}
{
  "name": "DS LP Header",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "header",
      "content": "Brand Settings"
    },
    {
      "type": "image_picker",
      "id": "brand_image",
      "label": "Brand Logo Image"
    },
    {
      "type": "range",
      "id": "brand_image_mobile_width",
      "label": "Logo Width - Mobile (px)",
      "min": 50,
      "max": 300,
      "step": 10,
      "default": 150,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "brand_image_desktop_width",
      "label": "Logo Width - Desktop (px)",
      "min": 100,
      "max": 500,
      "step": 10,
      "default": 250,
      "unit": "px"
    },
    {
      "type": "text",
      "id": "brand_name",
      "label": "Brand Name (Fallback)",
      "default": "Mushpreneur",
      "info": "Used as alt text if no image is uploaded"
    },
    {
      "type": "url",
      "id": "brand_link",
      "label": "Brand Link",
      "default": "/"
    },
    {
      "type": "header",
      "content": "Navigation Links"
    },
    {
      "type": "text",
      "id": "nav_link_1",
      "label": "Navigation Link 1",
      "default": "Why it Works"
    },
    {
      "type": "text",
      "id": "nav_link_2",
      "label": "Navigation Link 2",
      "default": "How it Works"
    },
    {
      "type": "text",
      "id": "nav_link_3",
      "label": "Navigation Link 3",
      "default": "Comparison"
    },
    {
      "type": "text",
      "id": "nav_link_4",
      "label": "Navigation Link 4",
      "default": "Founder's Message"
    },
    {
      "type": "text",
      "id": "nav_link_5",
      "label": "Navigation Link 5",
      "default": "Testimonials"
    },
    {
      "type": "text",
      "id": "nav_link_6",
      "label": "Navigation Link 6",
      "default": "FAQ"
    },
    {
      "type": "header",
      "content": "CTA Button"
    },
    {
      "type": "text",
      "id": "cta_text",
      "label": "CTA Button Text",
      "default": "Join the List"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Border Color",
      "default": "#e5e7eb"
    },
    {
      "type": "color",
      "id": "button_color",
      "label": "Button Background Color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button Text Color",
      "default": "#ffffff"
    }
  ],
  "presets": [
    {
      "name": "DS LP Header"
    }
  ]
}
{% endschema %}

